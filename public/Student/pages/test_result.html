<!DOCTYPE html>
<!--[if IE 8]> <html lang="en" class="ie8"> <![endif]-->
<!--[if !IE]><!-->
<html lang="en">
<!--<![endif]-->
<head>
	<meta charset="utf-8" />
	<title id="result-title">Result</title>
	<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport" />
	<meta content="" name="description" />
	<meta content="" name="author" />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.19/css/jquery.dataTables.min.css">
    <script src="https://code.jquery.com/jquery-3.3.1.js"></script>
    <script src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
    <script src="../../assets/patternfly/dist/js/patternfly.min.js"></script>

    <!-- C3  -->
    <link rel="stylesheet" href="../../assets/c3/c3.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/5.12.0/d3.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/5.12.0/d3.min.js"></script>
    <script src="../../assets/c3/c3.min.js"></script>
	<!-- ================== BEGIN BASE CSS STYLE ================== -->
	<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet" />
	<link href="../../assets/plugins/jquery-ui/jquery-ui.min.css" rel="stylesheet" />
	<link href="../../assets/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

	<link href="../../assets/plugins/animate/animate.min.css" rel="stylesheet" />
	<link href="../../assets/css/default/style.min.css" rel="stylesheet" />
	<link href="../../assets/css/default/style-responsive.min.css" rel="stylesheet" />
	<link href="../../assets/css/default/theme/default.css" rel="stylesheet" />
	<!-- ================== END BASE CSS STYLE ================== -->
	<link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
	<!-- ================== BEGIN BASE JS ================== -->
	<script src="../../assets/plugins/pace/pace.min.js"></script>
    <!-- ================== END BASE JS ================== -->
    <style>
            .donut_margin {
                display: inline-block;
            }
            .wrapper {
                width: 100%;
                margin: 0;
                padding: 0;
            }
         
            #loading_panel {
                width:100%;
                min-height: 100vh;
            
            }
            .dropdown-toggle::after {
                display: block;
                position: absolute;
                top: 50%;
                right: 20px;
                transform: translateY(-50%);
            }
    
            #overallAnalysisCard{
                display: none;
            }
            </style>
</head>
<body>
	<script>
	

	</script>
	<!-- begin #page-loader -->
	<div id="page-loader" class="fade show"><span class="spinner"></span></div>
	<!-- end #page-loader -->
	
	<!-- begin #page-container -->
	<div id="page-container" class="fade page-sidebar-fixed page-header-fixed">
		<!-- begin #header -->
		<div id="header" class="header navbar-default">
			<!-- begin navbar-header -->
			<div class="navbar-header">
				<a  class="navbar-brand"><span ></span> <b>PE</b> Tests .</a>
				<button type="button" class="navbar-toggle" data-click="sidebar-toggled">
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
			</div>
			<!-- end navbar-header -->
			
			<!-- begin header-nav -->
			<ul class="navbar-nav navbar-right">
				<li>
					<form class="navbar-form">
						<div class="form-group">
							<input type="text" class="form-control" placeholder="Enter keyword" />
							<button type="submit" class="btn btn-search"><i class="fa fa-search"></i></button>
						</div>
					</form>
				</li>
				
				<li class="dropdown navbar-user">
					<a href="#" class="dropdown-toggle" data-toggle="dropdown">
						<div class="image image-icon bg-black text-grey-darker">
						<img src="../PE_Resources/paathshala_logo_512.png">
						</div>
						<span id="navbarNameHolder"></span>
					</a>
					<div class="dropdown-menu dropdown-menu-right">
						<a href="#" id="logoutButton" class="dropdown-item" style="cursor: pointer;" >Log Out</a>
					</div>
				</li>
			</ul>
			<!-- end header navigation right -->
		</div>
		<!-- end #header -->
		
		<!-- begin #sidebar -->
		<div id="sidebar" class="sidebar">
			<!-- begin sidebar scrollbar -->
			<div data-scrollbar="true" data-height="100%">
				<!-- begin sidebar user -->
				<ul class="nav">
					<li class="nav-profile">
						<a href="javascript:;" data-toggle="nav-profile">
							<div class="cover with-shadow"></div>
							<div class="info">
								<p id="sidebarNameHolder"></p>
								<small>Student</small>
							</div>
						</a>
					</li>

				
				</ul>
				<!-- end sidebar user -->
				<!-- begin sidebar nav -->
				<ul class="nav">
					<ul id="user_sidebar" class="nav">
					<li class="nav-header">Navigation</li>
					<li >
						<a href="./dashboard.html">
							<i class="fa fa-th-large"></i>
							<span>Home</span>
						</a>
					</li>
                    <li class="active">
                            <a id="result_page_link" href="#"> <span> Result </span></a>
                        </li>
                        <li>
                            <a id="subject_analysis_link" href="#"> <span> Subject Wise Analysis </span> </a>
                        </li>
                        <li>
                            <a id="section_analysis_link" href="#"><span> Section Wise Analysis </span></a>
                            
                        </li>
                        <li>
                            <a id="chapter_analysis_link" href="#"><span> Chapter Wise Analysis </span></a>
                        </li>
                        <li>
                            <a id="topic_analysis_link" href="#"><span> Topic Wise Analysis </span></a>
                        </li>
                        <li>
                           <a id="dlevel_analysis_link" href="#"><span> Difficulty Level Analysis </span></a>
                        </li>
                       
                    

					
				</ul>
					<!-- menu 2-->
					<!-- begin sidebar minify button -->
					<li><a href="javascript:;" class="sidebar-minify-btn" data-click="sidebar-minify"><i class="fa fa-angle-double-left"></i></a></li>
					<!-- end sidebar minify button -->
				</ul>
				<!-- end sidebar nav -->
			</div>
			<!-- end sidebar scrollbar -->
		</div>
 
		<div class="content" id="content" style="min-height:100vh;padding: 0px">
                <div id="loading_panel" style="background-color: black;color:white;padding-top: 50px">
                        <img src="../../assets/loading/loading_graph_gif.gif" width="40" height="40" style="margin-left:auto;margin-right:auto;display:block">
                        <h6 style="text-align: center;font-family: sans-serif;color:white"> GENERATING REPORTS </h6>
                </div>   
            <nav class="navbar navbar-dark bg-dark">
                        <a class="navbar-brand" href="#" style="float:right" id="student_marks_navbar"></a>
             </nav>   
            <table id="resultDataTable" class="display" style="width:100%">
        
            </table>
        
            <br>
            <div class="card" id="overallAnalysisCard" style="width:83%;margin-left:auto;margin-right:auto">
                    <div class="card-header">
                           <b>Overall Analysis</b>
                    </div>
                    <div class="card-body">
                            <div id="overallAnalysisArea" style="width:100%">
        
                            </div>
                    </div>
            </div>
            <div id="selectionAnalysisArea" style="padding:10px;"> </div>
        
        </div>

		<!-- end #content -->
		
		<!-- begin scroll to top btn -->
		<a href="javascript:;" class="btn btn-icon btn-circle btn-success btn-scroll-to-top fade" data-click="scroll-top"><i class="fa fa-angle-up"></i></a>
		<!-- end scroll to top btn -->
	</div>
	<!-- end page container -->
	
	<!-- ================== BEGIN BASE JS ================== -->
	<script src="../../assets/plugins/jquery-ui/jquery-ui.min.js"></script>
	<script src="../../assets/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
	<!--[if lt IE 9]>
		<script src="../../assets/crossbrowserjs/html5shiv.js"></script>
		<script src="../../assets/crossbrowserjs/respond.min.js"></script>
		<script src="../../../admin/template../../assets/crossbrowserjs/excanvas.min.js"></script>
	<![endif]-->
	<script src="../../assets/plugins/slimscroll/jquery.slimscroll.min.js"></script>
	<script src="../../assets/plugins/js-cookie/js.cookie.js"></script>
	<script src="../../../admin/template../../assets/js/theme/default.min.js"></script>
	<script src="../../assets/js/apps.min.js"></script>
	<!-- ================== END BASE JS ================== -->
	
	<script>
	var pe_username;
var pe_email;
var result;
var highest_result;
var all_results;
var user_access_token = localStorage.getItem("student_token");
var domain_url = "https://photonecademy.com/tests"
// Related to this page
var student_marks_navbar = document.getElementById("student_marks_navbar");
var resultDataTable = document.getElementById(`resultDataTable`)
var overallAnalysisArea = document.getElementById(`overallAnalysisArea`);
var selectionAnalysisArea = document.getElementById(`selectionAnalysisArea`)
var test_name_header = document.getElementById("sidebarNameHolder");



///////////////////
var data_table_header_content = `
<thead>
    <tr> 
        <th> Sr No. </th>
        <th> Q No </th>
        <th> Your Answer </th>
        <th> Marks Scored </th>
        <th> DLevel </th>
        <th> Subject </th>
        <th> Section </th>
        <th> Chapter </th>
        <th> Topic </th>
        <th> % Correct </th>
        <th> % Wrong </th>
        <th> % Unattempted </th>
    </tr>
</thead>

`
var data_table_content=``;

var data_table_fotter_content = `

<tfoot>
            <tr>
                    <th> Sr No. </th>
                    <th> Q No </th>
                    <th> Your Answer </th>
                    <th> Marks Scored </th>
                    <th> DLevel </th>
                    <th> Subject </th>
                    <th> Section </th>
                    <th> Chapter </th>
                    <th> Topic </th>
                    <th> % Correct </th>
                    <th> % Wrong </th>
                    <th> % Unattempted </th>
            </tr>
</tfoot>
`

function getUrlParameter(name) {
    name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
    var regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
    var results = regex.exec(location.search);
    return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
};
var test_name = getUrlParameter('test_name');
////////////////////////////////////////////////////////////////////////////////////////////////////////////
// Links Management
var result_page_link = document.getElementById("result_page_link");
var subject_analysis_link = document.getElementById("subject_analysis_link");
var section_analysis_link = document.getElementById("section_analysis_link");
var chapter_analysis_link = document.getElementById("chapter_analysis_link");
var topic_analysis_link = document.getElementById("topic_analysis_link");
var dlevel_analysis_link = document.getElementById("dlevel_analysis_link");

result_page_link.href = "#";
subject_analysis_link.href = `${domain_url}/Student/pages/subject_analysis.html?test_name=${test_name}`;
section_analysis_link.href = `${domain_url}/Student/pages/section_analysis.html?test_name=${test_name}`;
chapter_analysis_link.href = `${domain_url}/Student/pages/chapter_analysis.html?test_name=${test_name}`;
topic_analysis_link.href = `${domain_url}/Student/pages/topic_analysis.html?test_name=${test_name}`;
dlevel_analysis_link = `${domain_url}/Student/pages/dlevel_analysis.html?test_name=${test_name}`;
////////////////////////////////////////////////////////////////////////////////////////////////////////////
test_name_header.innerHTML=test_name;
fetch(`${domain_url}/verifyStudent`,{
			headers:{
				method:"GET",
				authorization:user_access_token
			}
		}).then(response=>response.json()).then(data=>{
			console.log("is token verified? "+data.is_verified);
			if(data.is_verified==false)
			{
				document.location.href=`${domain_url}`;
			}
			if(data.is_verified==true)
			{
				console.log(data);
				var authDetails = data.student;
				pe_username = authDetails.studentID;
				console.log(` Test Name is ${test_name} and StudentID is ${pe_username}`)
                fetch(`${domain_url}/getSpecificTestResult`,{
                    method:"POST",
                    headers:{
                        authorization:user_access_token,
                        'Content-type':'application/json'
                    },
                    body:JSON.stringify({studentID:pe_username,test_name:test_name})
                }).then(res=>res.json()).then(output=>{
                    console.log(output)
                    if(output.is_successful)
                    {
                        var t_marks = output.result.test_correct_marks * output.result.answers.length;
                        var score = `Your Score : ${output.result.total_marks} / ${t_marks}`
                        result = output.result;
                        test = output.test;
                        student_marks_navbar.innerHTML=score;
                        parsed_all = 0;
                        show_result=0;
                        for(let i=0;i<output.test.questions.length;i++)
                        {
                            var answer;
                            var marks_scored=0;
                            percent_correct = parseFloat((output.test.question_details.questions_stats[i].total_correct/output.test.test_taken_count)*100).toFixed(3);
                            percent_wrong = parseFloat((output.test.question_details.questions_stats[i].total_wrong/output.test.test_taken_count)*100).toFixed(3);
                            percent_unattempted = parseFloat((output.test.question_details.questions_stats[i].total_unattempted/output.test.test_taken_count)*100).toFixed(3);

                            if(output.result.answers[i]==0)
                            {
                                answer="Wrong";
                                marks_scored=marks_scored+output.test.wrong_marks;
                            }
                            else if(output.result.answers[i]==1)
                            {
                                answer="Correct";
                                marks_scored=marks_scored+output.test.correct_marks;
                            }
                            else
                            {
                                answer="Unattempted";
                                marks_scored=0;
                            }
                            data_table_content+=`
                            <tr>
                                <td> ${i+1} </td>
                                <td> Q.${i+1} </td>
                                <td> ${answer} </td>
                                <td> ${marks_scored} </td>
                                <td> ${output.test.questions[i].DLevel} </td>
                                <td> ${output.test.questions[i].subject} </td>
                                <td> ${output.test.questions[i].section} </td>
                                <td> ${output.test.questions[i].chapter} </td>
                                <td> ${output.test.questions[i].topic} </td>
                                <td> ${percent_correct} %</td>
                                <td> ${percent_wrong} %</td>
                                <td> ${percent_unattempted} %</td>
                            </tr>
                            `
                            if(i==output.test.questions.length-1)
                            {
                                parsed_all=1;
                                resultDataTable.innerHTML=`${data_table_header_content}<tbody>${data_table_content}</tbody>${data_table_fotter_content}`;
                                $('#resultDataTable thead th').each( function () {
                                var title = $(this).text();
                                $(this).html( '<input type="text" placeholder="Search '+title+'" /><br>' );
                                $(this).html( `<h6> ${title} </h6>` );

                                } );
 
                                var table = $(`#resultDataTable`).DataTable();
                                // Data Table Search
                                table.columns().every( function () {
                                        var that = this;
                                
                                        $( 'input', this.footer() ).on( 'keyup change clear', function () {
                                            if ( that.search() !== this.value ) {
                                                that
                                                    .search( this.value )
                                                    .draw();
                                            }
                                        } );
                                    } );
                                show_result=1;
                            }
                        }
                        // Get All Results
                        fetch(`${domain_url}/getAllResults`,{
                            method:"POST",
                            headers:{
                                authorization:user_access_token,
                                'Content-type':'application/json'
                            },
                            body:JSON.stringify({test_name:test_name})
                        }).then(res=>res.json()).then(data=>{
                            console.log(data)
                            if(data.is_successful)
                            {
                                all_results = data.results;
                                          // Get Top Result
                                                fetch(`${domain_url}/getTopResult`,{
                                                    method:"POST",
                                                    headers:{
                                                        authorization:user_access_token,
                                                        'Content-type':'application/json'
                                                    },
                                                    body:JSON.stringify({test_name:test_name})
                                                }).then(res=>res.json()).then(data=>{
                                                    console.log(data)
                                                    if(data.is_successful)
                                                    {
                                                        document.getElementById("overallAnalysisCard").style.display="block";
                                                        document.getElementById("loading_panel").style.display="none";
                                                        highest_result = data.topResult;
                                                         // Show Overall Analysis (IMP)
                                                            if(highest_result.length>0)
                                                            {
                                                            // User Percentages
                                                                percentage_correct_user = parseFloat((result.total_correct/test.questions.length)*100).toFixed(3)
                                                                percentage_wrong_user = parseFloat((result.total_wrong/test.questions.length)*100).toFixed(3)
                                                                percentage_unattempted_user = parseFloat((result.total_unattempted/test.questions.length)*100).toFixed(3)
                                                            // Highest Percentages
                                                                percentage_correct_highest = parseFloat((highest_result[0].total_correct/test.questions.length)*100).toFixed(3)
                                                                percentage_wrong_highest = parseFloat((highest_result[0].total_wrong/test.questions.length)*100).toFixed(3)
                                                                percentage_unattempted_highest = parseFloat((highest_result[0].total_unattempted/test.questions.length)*100).toFixed(3)
                                                            //  Average Percentages
                                                                total_correct_average = 0;
                                                                total_wrong_average = 0;
                                                                total_unattempted_average = 0;
                                                                test.question_details.questions_stats.forEach(question=>{
                                                                    total_correct_average += question.total_correct;
                                                                    total_wrong_average += question.total_wrong;
                                                                    total_unattempted_average += question.total_unattempted;
                                                                })

                                                                percentage_correct_average = parseFloat((total_correct_average/(test.test_taken_count*test.questions.length)*100)).toFixed(3)
                                                                percentage_wrong_average = parseFloat((total_wrong_average/(test.test_taken_count*test.questions.length)*100)).toFixed(3)
                                                                percentage_unattempted_average = parseFloat((total_unattempted_average/(test.test_taken_count*test.questions.length)*100)).toFixed(3)

                                                                overallAnalysisArea.innerHTML=`
                                                                <div class="chart_container" style="display:inline-block;float:right;margin-top:-23px;">
                                                                    <div id="donut-chart-overall-user"  class="donut_margin donut_other_margins"></div>
                                                                    <div id="donut-chart-overall-average"  class="donut_margin donut_other_margins"></div>
                                                                    <div id="donut-chart-overall-highest"  class="donut_margin donut_other_margins"></div>
                                                                </div>
                                                                <div class="progress_bar_container" style="display:inline-block">
                                                                    <div class="progress_container" style="display:inline-block">
                                                                        <div class="progress-description">
                                                                             Highest Performance
                                                                        </div>
                                                                        <div class="progress progress-label-top-right" style="height:20px;">
                                                                            <div class="progress-bar unselectable"  role="progressbar" aria-valuenow="${percentage_correct_highest}" aria-valuemin="0" aria-valuemax="100" style="width: ${percentage_correct_highest}%;background-color:#02006D"  data-toggle="tooltip" title="${percentage_correct_highest}% Correct">
                                                                                <span><strong>${percentage_correct_highest} % </strong> Correct </span>
                                                                            </div>
                                                                            <div class="progress-bar unselectable"  role="progressbar" aria-valuenow="${percentage_unattempted_highest}" aria-valuemin="0" aria-valuemax="100" style="width: ${percentage_unattempted_highest}%;background-color:#55DAFD"  data-toggle="tooltip" title="${percentage_unattempted_highest}% Unattempted">
                                                                                <span><strong>${percentage_unattempted_highest} % </strong> Unattempted </span>
                                                                            </div>
                                                                            <div class="progress-bar unselectable"  role="progressbar" aria-valuenow="${percentage_wrong_highest}" aria-valuemin="0" aria-valuemax="100" style="width: ${percentage_wrong_highest}%;background-color:#6F00FF"  data-toggle="tooltip" title="${percentage_wrong_highest}% Wrong">
                                                                                <span><strong>${percentage_wrong_highest} % </strong> Wrong </span>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <br>
                                                                    <div id="usersPerformance" class="progress_container" style="display:inline-block;margin-top:0px;">
                                                                        <div class="progress-description" >
                                                                            Your Performance
                                                                        </div>
                                                                        <div class="progress progress-label-top-right" style="height:20px" >
                                                                            <div class="progress-bar unselectable"  role="progressbar" aria-valuenow="${percentage_correct_user}" aria-valuemin="0" aria-valuemax="100" style="width: ${percentage_correct_user}%;background-color:#02006D"  data-toggle="tooltip" title="${percentage_correct_user}% Correct">
                                                                                <span><strong>${percentage_correct_user} % </strong> Correct </span>
                                                                            </div>
                                                                            <div class="progress-bar unselectable"  role="progressbar" aria-valuenow="${percentage_unattempted_user}" aria-valuemin="0" aria-valuemax="100" style="width: ${percentage_unattempted_user}%;background-color:#55DAFD"  data-toggle="tooltip" title="${percentage_unattempted_user}% Unattempted">
                                                                                <span><strong>${percentage_unattempted_user} % </strong> Unattempted </span>
                                                                            </div>
                                                                            <div class="progress-bar unselectable"  role="progressbar" aria-valuenow="${percentage_wrong_user}" aria-valuemin="0" aria-valuemax="100" style="width: ${percentage_wrong_user}%;background-color:#6F00FF"  data-toggle="tooltip" title="${percentage_wrong_user}% Wrong">
                                                                                <span><strong>${percentage_wrong_user} % </strong> Wrong </span>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <br>
                                                                    <div class="progress_container" style="display:inline-block">
                                                                        <div class="progress-description">
                                                                            Average Performance
                                                                        </div>
                                                                        <div class="progress progress-label-top-right" style="height:20px">
                                                                            <div class="progress-bar unselectable"  role="progressbar" aria-valuenow="${percentage_correct_average}" aria-valuemin="0" aria-valuemax="100" style="width: ${percentage_correct_average}%;background-color:#02006D"  data-toggle="tooltip" title="${percentage_correct_average}% Correct">
                                                                                <span><strong>${percentage_correct_average} % </strong> Correct </span>
                                                                            </div>
                                                                            <div class="progress-bar unselectable"  role="progressbar" aria-valuenow="${percentage_unattempted_average}" aria-valuemin="0" aria-valuemax="100" style="width: ${percentage_unattempted_average}%;background-color:#55DAFD"  data-toggle="tooltip" title="${percentage_unattempted_average}% Unattempted">
                                                                                <span><strong>${percentage_unattempted_average} % </strong> Unattempted </span>
                                                                            </div>
                                                                            <div class="progress-bar unselectable"  role="progressbar" aria-valuenow="${percentage_wrong_average}" aria-valuemin="0" aria-valuemax="100" style="width: ${percentage_wrong_average}%;background-color:#6F00FF"  data-toggle="tooltip" title="${percentage_wrong_user}% Wrong">
                                                                                <span><strong>${percentage_wrong_average} % </strong> Wrong </span>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                  
                                                                
                                                                `
                                                                 //// DONUT CHARTS CONFIGURATION

                                                                        // For User 
                                                                        var c3ChartDefaults = $().c3ChartDefaults();
                                                                        var donutData = {
                                                                        type : 'donut',
                                                                        columns: [
                                                                            ['% Correct', percentage_correct_user],
                                                                            ['% Unattempted', percentage_unattempted_user],
                                                                            ['% Wrong', percentage_wrong_user]
                                                                        ],
                                                                      
                                                                        };
                                                                    
                                                                        // Right Legend
                                                                        var donutChartRightConfig = c3ChartDefaults.getDefaultRelationshipDonutConfig();
                                                                        donutChartRightConfig.bindto = '#donut-chart-overall-user';
                                                                        donutChartRightConfig.tooltip = {show: true};
                                                                        donutChartRightConfig.data = donutData;
                                                                        donutChartRightConfig.legend = {
                                                                        show: true,
                                                                        position: 'right'
                                                                        };
                                                                        donutChartRightConfig.size = {
                                                                        width: 251,
                                                                        height: 161
                                                                        };
                                                                        donutChartRightConfig.tooltip = {
                                                                        contents: $().pfDonutTooltipContents
                                                                        };

                                                                        var donutChartRightLegend = c3.generate(donutChartRightConfig);
                                                                        $().pfSetDonutChartTitle("#donut-chart-overall-user", "User");
                                                                        // For Average
                                                                        var c3ChartDefaults = $().c3ChartDefaults();
                                                                        var donutData = {
                                                                        type : 'donut',
                                                                        columns: [
                                                                            ['% Correct', percentage_correct_average],
                                                                            ['% Unattempted', percentage_unattempted_average],
                                                                            ['% Wrong', percentage_wrong_average]
                                                                        ],
                                                                   
                                                                        };
                                                                    
                                                                        // Right Legend
                                                                        var donutChartRightConfig = c3ChartDefaults.getDefaultRelationshipDonutConfig();
                                                                        donutChartRightConfig.bindto = '#donut-chart-overall-average';
                                                                        donutChartRightConfig.tooltip = {show: true};
                                                                        donutChartRightConfig.data = donutData;
                                                                        donutChartRightConfig.legend = {
                                                                        show: true,
                                                                        position: 'right'
                                                                        };
                                                                        donutChartRightConfig.size = {
                                                                        width: 251,
                                                                        height: 161
                                                                        };
                                                                        donutChartRightConfig.tooltip = {
                                                                        contents: $().pfDonutTooltipContents
                                                                        };

                                                                        var donutChartRightLegend = c3.generate(donutChartRightConfig);
                                                                        $().pfSetDonutChartTitle("#donut-chart-overall-average", "Average");
                                                                        // For Highest
                                                                        var c3ChartDefaults = $().c3ChartDefaults();
                                                                        var donutData = {
                                                                        type : 'donut',
                                                                        columns: [
                                                                            ['% Correct', percentage_correct_highest],
                                                                            ['% Unattempted', percentage_unattempted_highest],
                                                                            ['% Wrong', percentage_wrong_highest]
                                                                        ],
                                                                   
                                                                        };
                                                                    
                                                                        // Right Legend
                                                                        var donutChartRightConfig = c3ChartDefaults.getDefaultRelationshipDonutConfig();
                                                                        donutChartRightConfig.bindto = '#donut-chart-overall-highest';
                                                                        donutChartRightConfig.tooltip = {show: true};
                                                                        donutChartRightConfig.data = donutData;
                                                                        donutChartRightConfig.legend = {
                                                                        show: true,
                                                                        position: 'right'
                                                                        };
                                                                        donutChartRightConfig.size = {
                                                                        width: 251,
                                                                        height: 161
                                                                        };
                                                                        donutChartRightConfig.tooltip = {
                                                                        contents: $().pfDonutTooltipContents
                                                                        };

                                                                        var donutChartRightLegend = c3.generate(donutChartRightConfig);
                                                                        $().pfSetDonutChartTitle("#donut-chart-overall-highest", "Highest");

                                                            }
                                                    }
                                                    else
                                                    {
                                                        console.log("FAILED TO GET RESULTS")
                                                    }
                                                })
                            }
                            else
                            {
                                console.log("FAILED TO GET RESULTS")
                            }
                        })
              


                        

                    }
                    else
                    {
                        alert("Failed to get result")
                    }
                })
			}
        })
        
                       
		$(document).ready(function() {
			App.init();
		});
	</script>
</body>
</html>
